function writeGTGraphFile(frames, globalFeatures, imageRange, sequence)

gtFileName = ['vk-',num2str(sequence),'-',num2str(imageRange(1)),'-',...
    num2str(imageRange(end)),'-GT.graph'];
fileID = fopen(strcat(pwd,'/vk-FrontEnd/GraphFiles/',gtFileName),'w');

vertexCount = 0;

for i = 1:length(frames)
    % camera pose vertex
    label = 'VERTEX_POSE_R3_SO3';
    vertexCount = vertexCount + 1;
    index = vertexCount;  
    value = frames(i).cameraPose';
    writeVertex(label,index,value,fileID);
    % features extracted in this frame
    frameFeaturesIndx = find(globalFeatures.frame == imageRange(i));
    for j = 1:length(frameFeaturesIndx)
        label = 'VERTEX_POINT_3D';
        vertexCount = vertexCount + 1;
        index = vertexCount;  
        value = globalFeatures.location3D(:,frameFeaturesIndx(j))';
        writeVertex(label,index,value,fileID);
    end
    % rigid objects motion
    if i > 1
        for k = 1:length(frames(i).objects)
             =  [frames(1).objects.id];
            label = 'VERTEX_SE3Motion';
            vertexCount = vertexCount + 1;
            index = vertexCount;
            value = '';
            writeVertex(label,index,value,fileID);
        end
    end
end



end